<!doctype html>
<!-- See http://www.firepad.io/docs/ for detailed embedding docs. -->
<html>

<head>
  <meta charset="utf-8" />

  <!-- CodeMirror -->
  <script src="assets/codemirror.js"></script>
  <link rel="stylesheet" href="assets/codemirror.css" />

  <!-- Firepad -->
  <link rel="stylesheet" href="assets/firepad.css" />
  <script src="../dist/firepad.js"></script>
  <script src="assets/jquery-3.1.1.min.js"></script>

 
  <style>
    html { height: 100%; }
    body { margin: 0; height: 100%; position: relative; }
      /* Height / width / positioning can be customized for your use case.
         For demo purposes, we make firepad fill the entire browser. */
    #firepad-container {
      width: 100%;
      height: 100%;
    }
  </style>

</head>


<body onload="">
<div class="status"></div>
  <div id="firepad-container"></div>

  <script>
  var firepad;
  var code_mirror;
    (function init() {
      //// Create CodeMirror (with lineWrapping on).
      code_mirror = CodeMirror(document.getElementById('firepad-container'), { lineWrapping: true });

      //// Create Firepad (with rich text toolbar and shortcuts enabled).
      firepad = Firepad.fromCodeMirror(code_mirror,
                                      { richTextToolbar: true, richTextShortcuts: true });


      //// Autosave notes
      var timeout_id;
      var status = $('div.status');

      code_mirror.on('change', function(){

        status.text("changes pending");
        if (timeout_id) {
          clearTimeout(timeout_id);
        }
        timeout_id = setTimeout(function() {
          console.error(firepad.getHtml());
          status.text("changes saved");
        }, 800);

      })
    })()
  </script>
</body>
</html>
